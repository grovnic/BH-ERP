<script>
document.getElementById('registerForm').addEventListener('submit', async (e) => {
    e.preventDefault();
    
    console.log('=== DEBUG START ===');
    console.log('Supabase Client:', supabaseClient);
    console.log('Config URL:', CONFIG.SUPABASE_URL);
    console.log('Config Key (first 20 chars):', CONFIG.SUPABASE_ANON_KEY.substring(0, 20));
    
    // TEST 1: Provjeri konekciju
    try {
        const { data, error } = await supabaseClient
            .from('tenants')
            .select('count')
            .limit(1);
        console.log('✅ Konekcija sa bazom radi!', data, error);
    } catch (err) {
        console.error('❌ Konekcija sa bazom NE RADI:', err);
        showMessage('Greška konekcije: ' + err.message, 'error');
        return;
    }
    
    // TEST 2: Pokušaj signup
    const formData = {
        name: document.getElementById('name').value,
        company_name: document.getElementById('company_name').value,
        pib: document.getElementById('pib').value,
        address: document.getElementById('address').value,
        city: document.getElementById('city').value,
        phone: document.getElementById('phone').value,
        email: document.getElementById('email').value,
        password: document.getElementById('password').value
    };
    
    console.log('Form data:', formData);
    
    try {
        console.log('Pokušavam signUp...');
        const { data: authData, error: authError } = await supabaseClient.auth.signUp({
            email: formData.email,
            password: formData.password
        });
        
        if (authError) {
            console.error('❌ Auth Error:', authError);
            showMessage('Auth greška: ' + authError.message, 'error');
            return;
        }
        
        console.log('✅ Auth Success:', authData);
        showMessage('Registracija uspješna! Provjerite email za potvrdu.', 'success');
        
    } catch (err) {
        console.error('❌ Catch Error:', err);
        showMessage('Greška: ' + err.message, 'error');
    }
    
    console.log('=== DEBUG END ===');
});
</script>
